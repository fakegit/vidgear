<!--
===============================================
vidgear library source-code is deployed under the Apache 2.0 License:

Copyright (c) 2019-2020 Abhishek Thakur(@abhiTronix) <abhi.una12@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
===============================================
--> <!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><meta content="High-performance cross-platform Video Processing Python framework powerpacked with unique trailblazing features." name="description"/><link href="https://github.com/abhiTronix/vidgear/gears/writegear/compression/usage/" rel="canonical"/><meta content="Abhishek Thakur" name="author"/><link href="../../../../assets/images/favicon-32.png" rel="shortcut icon"/><meta content="mkdocs-1.1.2, mkdocs-material-5.5.12" name="generator"/><title>Usage Examples - VidGear</title><link href="../../../../assets/stylesheets/main.4dd2dd8d.min.css" rel="stylesheet"/><link href="../../../../assets/stylesheets/palette.6a5ad368.min.css" rel="stylesheet"/><meta content="#4051b5" name="theme-color"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Nunito:300,400,400i,700%7CIBM+Plex&amp;display=fallback" rel="stylesheet"/><style>body,input{font-family:"Nunito",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"IBM Plex",SFMono-Regular,Consolas,Menlo,monospace}</style><link crossorigin="use-credentials" href="../../../../site.webmanifest" rel="manifest"/><link href="../../../../assets/stylesheets/custom.css" rel="stylesheet"/><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-131929464-1","abhitronix.github.io"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script><script async="" src="https://www.google-analytics.com/analytics.js"></script></head> <body data-md-color-accent="light-blue" data-md-color-primary="indigo" data-md-color-scheme="" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#writegear-api-usage-examples-compression-mode"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-announce"> <div class="md-announce__inner md-grid md-typeset"> <style>
  /* Add background color transition */
  .md-announce {
  transition: background-color 125ms;
  }
  /* Change background color on link focus */
  .md-announce:focus-within {
  background-color: var(--md-accent-fg-color);
  }
  /* Don't wrap name of blog article */
  .md-announce strong {
  white-space: nowrap;
  }
  </style> <button class="c-smileyButton" onclick="window.open('https://ko-fi.com/W7W8WTYO','_blank');" type="button"> <span style="font-family: inherit !important;">VidGear is free, but rely on your support.</span> Click to Donate  <div class="c-smileyButton__hoverListener"></div> <div class="c-smileyButton__hoverListener"></div> <span class="c-smileyButton__face"></span> </button> </div> </aside> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Header" class="md-header-nav md-grid"> <a aria-label="VidGear" class="md-header-nav__button md-logo" href="https://github.com/abhiTronix/vidgear" title="VidGear"> <img alt="logo" src="../../../../assets/images/logo.svg"/> </a> <label class="md-header-nav__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg> </label> <div class="md-header-nav__title" data-md-component="header-title"> <div class="md-header-nav__ellipsis"> <span class="md-header-nav__topic md-ellipsis"> VidGear </span> <span class="md-header-nav__topic md-ellipsis"> Usage Examples </span> </div> </div> <label class="md-header-nav__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </label> <button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg> </button> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list"></ol> </div> </div> </div> </div> </div> <div class="md-header-nav__source"> <a class="md-source" href="https://github.com/abhiTronix/vidgear" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg> </div> <div class="md-source__repository"> abhiTronix/vidgear </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs"> <div class="md-tabs__inner md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../../.."> Home </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link md-tabs__link--active" href="../../../"> Gears </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../../../bonus/reference/camgear/"> Bonus </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../../../help/"> Help </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="VidGear" class="md-nav__button md-logo" href="https://github.com/abhiTronix/vidgear" title="VidGear"> <img alt="logo" src="../../../../assets/images/logo.svg"/> </a> VidGear </label> <div class="md-nav__source"> <a class="md-source" href="https://github.com/abhiTronix/vidgear" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg> </div> <div class="md-source__repository"> abhiTronix/vidgear </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/> <label class="md-nav__link" for="nav-1"> Home <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Home" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-1"> <span class="md-nav__icon md-icon"></span> Home </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../.." title="Overview"> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-2" id="nav-1-2" type="checkbox"/> <label class="md-nav__link" for="nav-1-2"> Installation <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Installation" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-1-2"> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../installation/" title="Installation Overview"> Installation Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../installation/pip_install/" title="Install using pip"> Install using pip </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../installation/source_install/" title="Install from source"> Install from source </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../switch_from_cv/" title="Switching from OpenCV"> Switching from OpenCV </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1-4" id="nav-1-4" type="checkbox"/> <label class="md-nav__link" for="nav-1-4"> Contribution Guidelines <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Contribution Guidelines" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-1-4"> <span class="md-nav__icon md-icon"></span> Contribution Guidelines </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../contribution/" title="Contribution Overview"> Contribution Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../contribution/issue/" title="Submitting an Issue Guidelines"> Submitting an Issue Guidelines </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../contribution/PR/" title="Submitting Pull Request(PR) Guidelines"> Submitting Pull Request(PR) Guidelines </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../changelog/" title="Release Notes"> Release Notes </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../license/" title="License"> License </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/> <label class="md-nav__link" for="nav-2"> Gears <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Gears" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-2"> <span class="md-nav__icon md-icon"></span> Gears </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../" title="Introduction"> Introduction </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" id="nav-2-2" type="checkbox"/> <label class="md-nav__link" for="nav-2-2"> CamGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="CamGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-2"> <span class="md-nav__icon md-icon"></span> CamGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../camgear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../camgear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2-3" id="nav-2-2-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-2-3"> Advanced Usage <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Advanced Usage" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-2-2-3"> <span class="md-nav__icon md-icon"></span> Advanced Usage </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../camgear/advanced/source_params/" title="Source Tweak Parameters"> Source Tweak Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../camgear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/camgear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/camgear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" id="nav-2-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-3"> PiGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="PiGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-3"> <span class="md-nav__icon md-icon"></span> PiGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../pigear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../pigear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../pigear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/pigear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/pigear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-4" id="nav-2-4" type="checkbox"/> <label class="md-nav__link" for="nav-2-4"> VideoGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="VideoGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-4"> <span class="md-nav__icon md-icon"></span> VideoGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../videogear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../videogear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../videogear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/videogear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/videogear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-5" id="nav-2-5" type="checkbox"/> <label class="md-nav__link" for="nav-2-5"> ScreenGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="ScreenGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-5"> <span class="md-nav__icon md-icon"></span> ScreenGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../screengear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../screengear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../screengear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/screengear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/screengear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6" id="nav-2-6" type="checkbox"/> <label class="md-nav__link" for="nav-2-6"> WriteGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="WriteGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-6"> <span class="md-nav__icon md-icon"></span> WriteGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../introduction/" title="Introduction"> Introduction </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-2" id="nav-2-6-2" type="checkbox"/> <label class="md-nav__link" for="nav-2-6-2"> Compression Mode <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Compression Mode" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-2-6-2"> <span class="md-nav__icon md-icon"></span> Compression Mode </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> Usage Examples <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./" title="Usage Examples"> Usage Examples </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#bare-minimum-usage"> Bare-Minimum Usage </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-in-rgb-mode"> Using Compression Mode in RGB Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-controlled-framerate"> Using Compression Mode with controlled FrameRate </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-hardware-encoders"> Using Compression Mode with Hardware encoders </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-opencv"> Using Compression Mode with OpenCV </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-videocapture-gears"> Using Compression Mode with VideoCapture Gears </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-live-audio-input"> Using Compression Mode with Live Audio Input </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-2-3" id="nav-2-6-2-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-6-2-3"> Advanced Usage <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Advanced Usage" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="nav-2-6-2-3"> <span class="md-nav__icon md-icon"></span> Advanced Usage </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../advanced/cciw/" title="Custom FFmpeg Commands"> Custom FFmpeg Commands </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../advanced/ffmpeg_install/" title="FFmpeg Installation"> FFmpeg Installation </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../params/" title="Parameters"> Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-6-3" id="nav-2-6-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-6-3"> Non-Compression Mode <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Non-Compression Mode" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-2-6-3"> <span class="md-nav__icon md-icon"></span> Non-Compression Mode </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../non_compression/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../non_compression/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../non_compression/params/" title="Parameters"> Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/writegear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/writegear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-7" id="nav-2-7" type="checkbox"/> <label class="md-nav__link" for="nav-2-7"> StreamGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="StreamGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-7"> <span class="md-nav__icon md-icon"></span> StreamGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../streamgear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../streamgear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-7-3" id="nav-2-7-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-7-3"> Advanced <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Advanced" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-2-7-3"> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../streamgear/ffmpeg_install/" title="FFmpeg Installation"> FFmpeg Installation </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../streamgear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/streamgear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/streamgear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-8" id="nav-2-8" type="checkbox"/> <label class="md-nav__link" for="nav-2-8"> NetGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="NetGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-8"> <span class="md-nav__icon md-icon"></span> NetGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-8-3" id="nav-2-8-3" type="checkbox"/> <label class="md-nav__link" for="nav-2-8-3"> Advanced Usage <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Advanced Usage" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-2-8-3"> <span class="md-nav__icon md-icon"></span> Advanced Usage </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/advanced/multi_server/" title="Multi-Servers Mode"> Multi-Servers Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/advanced/multi_client/" title="Multi-Clients Mode"> Multi-Clients Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/advanced/bidirectional_mode/" title="Bidirectional Mode"> Bidirectional Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/advanced/secure_mode/" title="Secure Mode"> Secure Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/advanced/compression/" title="Frame Compression"> Frame Compression </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/netgear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/netgear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-9" id="nav-2-9" type="checkbox"/> <label class="md-nav__link" for="nav-2-9"> WebGear <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="WebGear" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-9"> <span class="md-nav__icon md-icon"></span> WebGear </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../webgear/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../webgear/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../webgear/advanced/" title="Advanced Usage"> Advanced Usage </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../webgear/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/webgear/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/webgear_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-10" id="nav-2-10" type="checkbox"/> <label class="md-nav__link" for="nav-2-10"> NetGear_Async <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="NetGear_Async" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-10"> <span class="md-nav__icon md-icon"></span> NetGear_Async </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear_async/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear_async/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../netgear_async/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/netgear_async/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/netgear_async_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-11" id="nav-2-11" type="checkbox"/> <label class="md-nav__link" for="nav-2-11"> Stabilizer Class <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Stabilizer Class" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-2-11"> <span class="md-nav__icon md-icon"></span> Stabilizer Class </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../stabilizer/overview/" title="Overview"> Overview </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../stabilizer/usage/" title="Usage Examples"> Usage Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../stabilizer/params/" title="Parameters"> Parameters </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/stabilizer/" title="Reference"> Reference </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/stabilizer_faqs/" title="FAQs"> FAQs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/> <label class="md-nav__link" for="nav-3"> Bonus <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Bonus" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-3"> <span class="md-nav__icon md-icon"></span> Bonus </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" id="nav-3-1" type="checkbox"/> <label class="md-nav__link" for="nav-3-1"> API Reference <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="API Reference" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-3-1"> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-1" id="nav-3-1-1" type="checkbox"/> <label class="md-nav__link" for="nav-3-1-1"> vidgear.gears <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="vidgear.gears" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-3-1-1"> <span class="md-nav__icon md-icon"></span> vidgear.gears </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/camgear/" title="camgear.py"> camgear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/pigear/" title="pigear.py"> pigear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/videogear/" title="videogear.py"> videogear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/screengear/" title="screengear.py"> screengear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/writegear/" title="writegear.py"> writegear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/streamgear/" title="streamgear.py"> streamgear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/netgear/" title="netgear.py"> netgear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/stabilizer/" title="stabilizer.py"> stabilizer.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/helper/" title="helper.py"> helper.py </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1-2" id="nav-3-1-2" type="checkbox"/> <label class="md-nav__link" for="nav-3-1-2"> vidgear.gears.asyncio <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="vidgear.gears.asyncio" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="nav-3-1-2"> <span class="md-nav__icon md-icon"></span> vidgear.gears.asyncio </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/webgear/" title="webgear.py"> webgear.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/netgear_async/" title="netgear_async.py"> netgear_async.py </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/reference/helper_async/" title="helper.py"> helper.py </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/colorspace_manipulation/" title="Colorspace Manipulation"> Colorspace Manipulation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../bonus/TQM/" title="Threaded Queue Mode"> Threaded Queue Mode </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/> <label class="md-nav__link" for="nav-4"> Help <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Help" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="nav-4"> <span class="md-nav__icon md-icon"></span> Help </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" id="nav-4-1" type="checkbox"/> <label class="md-nav__link" for="nav-4-1"> Help VidGear 'n' Get Help <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Help VidGear 'n' Get Help" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-4-1"> <span class="md-nav__icon md-icon"></span> Help VidGear 'n' Get Help </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/" title="Helping VidGear"> Helping VidGear </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/get_help/" title="Getting Help"> Getting Help </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" id="nav-4-2" type="checkbox"/> <label class="md-nav__link" for="nav-4-2"> Frequently Asked Questions <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Frequently Asked Questions" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="nav-4-2"> <span class="md-nav__icon md-icon"></span> Frequently Asked Questions </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/general_faqs/" title="General FAQs"> General FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/camgear_faqs/" title="CamGear FAQs"> CamGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/pigear_faqs/" title="PiGear FAQs"> PiGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/screengear_faqs/" title="ScreenGear FAQs"> ScreenGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/streamgear_faqs/" title="StreamGear FAQs"> StreamGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/writegear_faqs/" title="WriteGear FAQs"> WriteGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/netgear_faqs/" title="NetGear FAQs"> NetGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/webgear_faqs/" title="WebGear FAQs"> WebGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/videogear_faqs/" title="VideoGear FAQs"> VideoGear FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/stabilizer_faqs/" title="Stabilizer Class FAQs"> Stabilizer Class FAQs </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/netgear_async_faqs/" title="NetGear_Async FAQs"> NetGear_Async FAQs </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../../help/motivation/" title="Project Motivation"> Project Motivation </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#bare-minimum-usage"> Bare-Minimum Usage </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-in-rgb-mode"> Using Compression Mode in RGB Mode </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-controlled-framerate"> Using Compression Mode with controlled FrameRate </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-hardware-encoders"> Using Compression Mode with Hardware encoders </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-opencv"> Using Compression Mode with OpenCV </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-videocapture-gears"> Using Compression Mode with VideoCapture Gears </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-compression-mode-with-live-audio-input"> Using Compression Mode with Live Audio Input </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content"> <article class="md-content__inner md-typeset"> <!--
===============================================
vidgear library source-code is deployed under the Apache 2.0 License:

Copyright (c) 2019-2020 Abhishek Thakur(@abhiTronix) <abhi.una12@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
===============================================
--> <h1 id="writegear-api-usage-examples-compression-mode">WriteGear API Usage Examples: Compression Mode<a class="headerlink" href="#writegear-api-usage-examples-compression-mode" title="Permanent link">¶</a></h1> <div class="admonition warning"> <p class="admonition-title">Important Information</p> <ul> <li> <p>WriteGear <strong>MUST</strong> requires FFmpeg executables for its Compression capabilities in Compression Mode. Follow these dedicated <a href="../advanced/ffmpeg_install/">Installation Instructions ➶</a> for its installation.</p> </li> <li> <p><mark>In case WriteGear API fails to detect valid FFmpeg executables on your system <em>(even if Compression Mode is enabled)</em>, it automatically fallbacks to <a href="../../non_compression/overview/">Non-Compression Mode</a>.</mark></p> </li> <li> <p><strong>DO NOT</strong> feed frames with different dimensions or channels to WriteGear, otherwise WriteGear will exit with <code>ValueError</code>.</p> </li> <li> <p><strong>DO NOT</strong> provide additional video-source with <code>-i</code> FFmpeg parameter in <a href="../params/#output_params"><code>output_params</code></a>, otherwise it will interfere with frame you input later, and it will break things!</p> </li> <li> <p>Heavy resolution multimedia files take time to render which can last up to <em>~.1-to-1 seconds</em>. Kindly wait till the WriteGear API terminates itself, and <strong>DO NOT</strong> try to kill the process instead.</p> </li> <li> <p>Always use <code>writer.close()</code> at the very end of the main code. <strong>NEVER USE IT INBETWEEN CODE</strong> to avoid undesired behavior.</p> </li> </ul> </div> <h2 id="bare-minimum-usage">Bare-Minimum Usage<a class="headerlink" href="#bare-minimum-usage" title="Permanent link">¶</a></h2> <p>Following is the bare-minimum code you need to get started with WriteGear API in Compression Mode:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">CamGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># open any valid video stream(for e.g `myvideo.avi` file)</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">CamGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="s1">'myvideo.avi'</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> 

<span class="c1"># Define writer with default parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">)</span> 

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if Nonetype</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># {do something with the frame here}</span>


    <span class="c1"># write frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p>  </p> <h2 id="using-compression-mode-in-rgb-mode">Using Compression Mode in RGB Mode<a class="headerlink" href="#using-compression-mode-in-rgb-mode" title="Permanent link">¶</a></h2> <p>For Compression Mode, WriteGear API contains <a href="../../../../bonus/reference/writegear/#vidgear.gears.writegear.WriteGear.write"><code>rgb_mode</code></a> boolean parameter, which if enabled <em>(i.e. <code>rgb_mode=True</code>)</em>, specifies that incoming frames are of RGB format <em>(instead of default BGR format)</em>, thereby also known as <mark>RGB Mode</mark>. The complete usage example is as follows:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">VideoGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Open live video stream on webcam at first index(i.e. 0) device</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">VideoGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Define writer with default parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">)</span> 

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if Nonetype</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># simulating RGB frame for example</span>
    <span class="n">frame_rgb</span> <span class="o">=</span> <span class="n">frame</span><span class="p">[:,:,::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


    <span class="c1"># writing RGB frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame_rgb</span><span class="p">,</span> <span class="n">rgb_mode</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="c1">#activate RGB Mode</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p>  </p> <h2 id="using-compression-mode-with-controlled-framerate">Using Compression Mode with controlled FrameRate<a class="headerlink" href="#using-compression-mode-with-controlled-framerate" title="Permanent link">¶</a></h2> <p>WriteGear API provides <a href="../params/#supported-parameters"><code>-input_framerate</code></a> attribute for its <code>options</code> dictionary parameter in Compression Mode, which allow us to control/set the constant framerate of the output video. </p> <details class="tip"><summary>Advanced Tip for setting constant framerate</summary><p>If <code>-input_framerate</code> attribute doesn't works for you, then define it in conjunction with another <code>-r</code> FFmpeg parameter as attribute:</p> <div class="highlight"><pre><span></span><code><span class="c1"># set output constant framerate to (say 60 fps)</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"-input_framerate"</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span> <span class="s2">"-r"</span><span class="p">:</span><span class="mi">60</span><span class="p">}</span>
<span class="c1"># assign that to WriteGear</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span><span class="o">=</span><span class="s2">"out.mp4"</span><span class="p">,</span> <span class="n">logging</span> <span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>
</code></pre></div> <p>But make sure you <mark>MUST set value of <code>-r</code> and <code>-input_framerate</code> parameter less than or equal to your input source framerate.</mark></p> </details> <p>In this code we will retrieve framerate from video stream, and set it as <code>-input_framerate</code> attribute for <code>option</code> parameter in WriteGear API:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">CamGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Open live video stream on webcam at first index(i.e. 0) device</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">CamGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># retrieve framerate from CamGear Stream and pass it as `-input_framerate` parameter</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"-input_framerate"</span><span class="p">:</span><span class="n">stream</span><span class="o">.</span><span class="n">framerate</span><span class="p">}</span>

<span class="c1"># Define writer with defined parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if None-type</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># {do something with the frame here}</span>


    <span class="c1"># write frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p> </p> <h2 id="using-compression-mode-with-hardware-encoders">Using Compression Mode with Hardware encoders<a class="headerlink" href="#using-compression-mode-with-hardware-encoders" title="Permanent link">¶</a></h2> <p>By default, WriteGear API uses <em>libx264 encoder</em> for encoding its output files in Compression Mode. But you can easily change encoder to your suitable <a href="../params/#supported-encoders">supported encoder</a> by passing <code>-vcodec</code> FFmpeg parameter as an attribute in its <a href="../params/#output_params"><em>output_param</em></a> dictionary parameter. In addition to this, you can also specify the additional properties/features of your system's GPU easily. </p> <details class="warning"><summary>User Discretion Advised</summary><p>This example is just conveying the idea on how to use FFmpeg's hardware encoders with WriteGear API in Compression mode, which <strong>MAY/MAY NOT</strong> suit your system. Kindly use suitable parameters based your supported system and FFmpeg configurations only.</p> </details> <p>In this example, we will be using <code>h264_vaapi</code> as our hardware encoder and also optionally be specifying our device hardware's location (i.e. <code>'-vaapi_device':'/dev/dri/renderD128'</code>) and other features such as <code>'-vf':'format=nv12,hwupload'</code> like properties by formatting them as <code>option</code> dictionary parameter's attributes, as follows:</p> <div class="admonition danger"> <p class="admonition-title">Check VAAPI support</p> <p>To use <code>h264_vaapi</code> encoder, remember to check if its available and your FFmpeg compiled with VAAPI support. You can easily do this by executing following one-liner command in your terminal, and observing if output contains something similar as follows:</p> <div class="highlight"><pre><span></span><code>ffmpeg  -hide_banner -encoders <span class="p">|</span> grep vaapi 

 V..... h264_vaapi           H.264/AVC <span class="o">(</span>VAAPI<span class="o">)</span> <span class="o">(</span>codec h264<span class="o">)</span>
 V..... hevc_vaapi           H.265/HEVC <span class="o">(</span>VAAPI<span class="o">)</span> <span class="o">(</span>codec hevc<span class="o">)</span>
 V..... mjpeg_vaapi          MJPEG <span class="o">(</span>VAAPI<span class="o">)</span> <span class="o">(</span>codec mjpeg<span class="o">)</span>
 V..... mpeg2_vaapi          MPEG-2 <span class="o">(</span>VAAPI<span class="o">)</span> <span class="o">(</span>codec mpeg2video<span class="o">)</span>
 V..... vp8_vaapi            VP8 <span class="o">(</span>VAAPI<span class="o">)</span> <span class="o">(</span>codec vp8<span class="o">)</span>
</code></pre></div> </div> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">CamGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Open live webcam video stream on first index(i.e. 0) device</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">CamGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">logging</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span> 

<span class="c1"># define required FFmpeg parameters for your writer</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'-vcodec'</span><span class="p">:</span> <span class="s1">'h264_vaapi'</span><span class="p">,</span> <span class="s1">'-vaapi_device'</span><span class="p">:</span><span class="s1">'/dev/dri/renderD128'</span><span class="p">,</span> <span class="s1">'-vf'</span><span class="p">:</span><span class="s1">'format=nv12,hwupload'</span><span class="p">}</span> 

<span class="c1"># Define writer with defined parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if Nonetype</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># {do something with the frame here}</span>


    <span class="c1"># write frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p> </p> <h2 id="using-compression-mode-with-opencv">Using Compression Mode with OpenCV<a class="headerlink" href="#using-compression-mode-with-opencv" title="Permanent link">¶</a></h2> <p>You can easily use WriterGear API directly with any Video Processing library(<em>For e.g OpenCV itself</em>) in Compression Mode. The complete usage example is as follows:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># define suitable (Codec,CRF,preset) FFmpeg parameters for writer</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"-vcodec"</span><span class="p">:</span><span class="s2">"libx264"</span><span class="p">,</span> <span class="s2">"-crf"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"-preset"</span><span class="p">:</span> <span class="s2">"fast"</span><span class="p">}</span>

<span class="c1"># Open suitable video stream, such as webcam on first index(i.e. 0)</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 

<span class="c1"># Define writer with defined parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">,</span> <span class="n">logging</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="p">(</span><span class="n">grabbed</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if not grabbed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">grabbed</span><span class="p">:</span>
      <span class="k">break</span>

    <span class="c1"># {do something with the frame here}</span>
    <span class="c1"># lets convert frame to gray for this example</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># write gray frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Gray Frame"</span><span class="p">,</span> <span class="n">gray</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p>  </p> <h2 id="using-compression-mode-with-videocapture-gears">Using Compression Mode with VideoCapture Gears<a class="headerlink" href="#using-compression-mode-with-videocapture-gears" title="Permanent link">¶</a></h2> <p>WriteGear API can be used in conjunction with any other Gear effortlessly in Compression Mode. The complete usage example is as follows:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">VideoGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>


<span class="c1"># define suitable tweak parameters for your stream.</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"CAP_PROP_FRAME_WIDTH "</span><span class="p">:</span><span class="mi">320</span><span class="p">,</span> <span class="s2">"CAP_PROP_FRAME_HEIGHT"</span><span class="p">:</span><span class="mi">240</span><span class="p">,</span> <span class="s2">"CAP_PROP_FPS "</span><span class="p">:</span><span class="mi">60</span><span class="p">}</span>

<span class="c1"># define suitable (Codec,CRF,preset) FFmpeg parameters for writer</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"-vcodec"</span><span class="p">:</span><span class="s2">"libx264"</span><span class="p">,</span> <span class="s2">"-crf"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"-preset"</span><span class="p">:</span> <span class="s2">"fast"</span><span class="p">}</span>

<span class="c1"># open live video stream on webcam at first index(i.e. 0) device and apply source tweak parameters</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">VideoGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">logging</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Define writer with defined parameters and suitable output filename for e.g. `Output.mp4`</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">,</span> <span class="n">logging</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>


<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if Nonetype</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># {do something with the frame here}</span>
    <span class="c1"># lets convert frame to gray for this example</span>
    <span class="n">gray</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

    <span class="c1"># write gray frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Gray Frame"</span><span class="p">,</span> <span class="n">gray</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p>  </p> <h2 id="using-compression-mode-with-live-audio-input">Using Compression Mode with Live Audio Input<a class="headerlink" href="#using-compression-mode-with-live-audio-input" title="Permanent link">¶</a></h2> <p>In Compression Mode, WriteGear API allows us to exploit almost all FFmpeg supported parameters that you can think of, in its Compression Mode. Hence, processing, encoding, and combining audio with video is pretty much straightforward.</p> <div class="admonition warning"> <p class="admonition-title">Example Assumptions</p> <ul> <li>You're running are Linux machine.</li> <li>You already have appropriate audio &amp; video drivers and softwares installed on your machine.</li> </ul> </div> <div class="admonition danger"> <p class="admonition-title">Locate your Sound Card</p> <p>Remember to locate your Sound Card before running this example:</p> <ul> <li>Note down the Sound Card value using <code>arecord -L</code> command on the your Linux terminal. </li> <li>It may be similar to this <code>plughw:CARD=CAMERA,DEV=0</code></li> </ul> </div> <details class="tips"><summary>Tips</summary><p>The useful audio input options for ALSA input are <code>-ar</code> (<em>audio sample rate</em>) and <code>-ac</code> (<em>audio channels</em>). Specifying audio sampling rate/frequency will force the audio card to record the audio at that specified rate. Usually the default value is <code>"44100"</code> (Hz) but <code>"48000"</code>(Hz) works, so chose wisely. Specifying audio channels will force the audio card to record the audio as mono, stereo or even 2.1, and 5.1(<em>if supported by your audio card</em>). Usually the default value is <code>"1"</code> (mono) for Mic input and <code>"2"</code> (stereo) for Line-In input. Kindly go through <a href="https://ffmpeg.org/ffmpeg.html">FFmpeg docs</a> for more of such options.</p> </details> <p>In this example code, we will merge the audio from a Audio Source <em>(for e.g. Webcam inbuilt mic)</em> to the frames of a Video Source <em>(for e.g external webcam)</em>, and save this data as a compressed video file, all in real time:</p> <div class="highlight"><pre><span></span><code><span class="c1"># import required libraries</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">VideoGear</span>
<span class="kn">from</span> <span class="nn">vidgear.gears</span> <span class="kn">import</span> <span class="n">WriteGear</span>
<span class="kn">import</span> <span class="nn">cv2</span>

<span class="c1"># Open live video stream on webcam at first index(i.e. 0) device</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">VideoGear</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># change with your webcam soundcard, plus add additional required FFmpeg parameters for your writer</span>
<span class="n">output_params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'-thread_queue_size'</span><span class="p">:</span> <span class="s1">'512'</span><span class="p">,</span> <span class="s1">'-f'</span><span class="p">:</span> <span class="s1">'alsa'</span><span class="p">,</span> <span class="s1">'-ac'</span><span class="p">:</span> <span class="s1">'1'</span><span class="p">,</span> <span class="s1">'-ar'</span><span class="p">:</span> <span class="s1">'48000'</span><span class="p">,</span> <span class="s1">'-i'</span><span class="p">:</span> <span class="s1">'plughw:CARD=CAMERA,DEV=0'</span><span class="p">}</span>  

<span class="c1"># Define writer with defined parameters and suitable output filename for e.g. `Output.mp4</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">WriteGear</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">'Output.mp4'</span><span class="p">,</span> <span class="n">logging</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">output_params</span><span class="p">)</span>

<span class="c1"># loop over</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>

    <span class="c1"># read frames from stream</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1"># check for frame if Nonetype</span>
    <span class="k">if</span> <span class="n">frame</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">break</span>


    <span class="c1"># {do something with the frame here}</span>


    <span class="c1"># write frame to writer</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c1"># Show output window</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">"Output Frame"</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

    <span class="c1"># check for 'q' key if pressed</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
    <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s2">"q"</span><span class="p">):</span>
        <span class="k">break</span>

<span class="c1"># close output window</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>

<span class="c1"># safely close video stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="c1"># safely close writer</span>
<span class="n">writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div> <p>  </p> <hr/> <div class="md-source-date"> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 1, 2020</span> </small> </div> </article> </div> </div> </main> <footer class="md-footer"> <div class="md-footer-nav"> <nav aria-label="Footer" class="md-footer-nav__inner md-grid"> <a class="md-footer-nav__link md-footer-nav__link--prev" href="../overview/" rel="prev" title="Overview"> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </div> <div class="md-footer-nav__title"> <div class="md-ellipsis"> <span class="md-footer-nav__direction"> Previous </span> Overview </div> </div> </a> <a class="md-footer-nav__link md-footer-nav__link--next" href="../advanced/cciw/" rel="next" title="Custom FFmpeg Commands"> <div class="md-footer-nav__title"> <div class="md-ellipsis"> <span class="md-footer-nav__direction"> Next </span> Custom FFmpeg Commands </div> </div> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-footer-copyright"> <div class="md-footer-copyright__highlight"> Copyright © 2019 - 2020 Abhishek Thakur(@abhiTronix) </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> <div class="md-footer-social"> <a class="md-footer-social__link" href="https://github.com/abhiTronix" rel="noopener" target="_blank" title="github.com"> <svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class="md-footer-social__link" href="https://gitter.im/vidgear/community" rel="noopener" target="_blank" title="gitter.im"> <svg viewbox="0 0 384 512" xmlns="http://www.w3.org/2000/svg"><path d="M66.4 322.5H16V0h50.4v322.5zM166.9 76.1h-50.4V512h50.4V76.1zm100.6 0h-50.4V512h50.4V76.1zM368 76h-50.4v247H368V76z"></path></svg> </a> <a class="md-footer-social__link" href="https://twitter.com/abhi_una12" rel="noopener" target="_blank" title="twitter.com"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> <a class="md-footer-social__link" href="https://www.linkedin.com/in/abhishek-singh-thakur-a37845a5" rel="noopener" target="_blank" title="www.linkedin.com"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> </div> </div> </div> </footer> </div> <script src="../../../../assets/javascripts/vendor.3636a4ec.min.js"></script> <script src="../../../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src="../../../../assets/javascripts/clappr.min.js"></script> <script src="../../../../assets/javascripts/clappr-level-selector.min.js"></script> <script src="../../../../assets/javascripts/dash-shaka-playback.js"></script> <script src="../../../../assets/javascripts/extra.js"></script> </body> </html>